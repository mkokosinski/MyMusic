(this["webpackJsonpmy-music"]=this["webpackJsonpmy-music"]||[]).push([[0],{17:function(e,t,n){},19:function(e,t,n){},22:function(e,t,n){},23:function(e,t,n){},24:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(11),s=n.n(c),i=n(5),l=n.n(i),o=n(2),u=n(8),j=n(7),b=n(3),m=n(4),d=n(6),p=n.n(d),f=(n(17),n(0)),h=function(e){var t=e.children,n=e.className,a=e.disabled,r=e.type,c=e.onClick,s=Object(u.a)(e,["children","className","disabled","type","onClick"]),i=p()("button",Object(m.a)({"button--disabled":a},n,n));return Object(f.jsx)("button",Object(o.a)(Object(o.a)({className:i,type:r,onClick:c,disabled:a},s),{},{children:t}))},O=function(){return Object(f.jsxs)("div",{className:"fileField__placeholder",children:[Object(f.jsx)("span",{class:"material-icons-outlined",children:"upload_file"}),Object(f.jsx)("div",{children:"Format JPG/JPEG"}),Object(f.jsx)("div",{children:"Proporcje 1:1 (kwadrat)"})]})},v=function(e){return new Promise((function(t,n){try{var a=new Image;a.src=e,a.onload=function(){var e=a.height,n=a.width;t({ratio:n/e,height:e,width:n})}}catch(r){n(r)}}))},g=(n(19),function(e){var t=e.errorMessage,n=e.name,r=e.onChange,c=Object(a.useState)(null),s=Object(b.a)(c,2),i=s[0],o=s[1],u=function(){var e=Object(j.a)(l.a.mark((function e(t){var a,c,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=t.target.files[0],c=URL.createObjectURL(a),o(c),e.next=6,v(c);case 6:s=e.sent,r({target:{name:n,value:{file:a,path:c,sizes:s}}}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error("Image upload error",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),m=p()("fileField",{"fileField--hasError":t});return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("div",{className:m,children:Object(f.jsxs)("label",{className:"fileField__label",htmlFor:n,children:[Object(f.jsx)("input",{className:"fileField__input",accept:"image/jpeg",type:"file",name:n,id:n,onChange:u}),Object(f.jsx)("div",{className:"fileField__preview",children:i?Object(f.jsx)("img",{src:i,alt:"Uploaded img preview"}):Object(f.jsx)(O,{})}),Object(f.jsx)(h,{tabIndex:"-1",className:"button--light fileField__button",children:Object(f.jsx)("span",{children:i?"Zmie\u0144 zdj\u0119cie":"Dodaj zdj\u0119cie"})})]})}),Object(f.jsx)("div",{className:"error formControl__errorMessage fileField__errorMessage",children:t})]})}),x=function(e){var t=e.errorMessage,n=e.label,r=e.name,c=e.value,s=e.onChange,i=Object(u.a)(e,["errorMessage","label","name","value","onChange"]),l=Object(a.useState)(!1),j=Object(b.a)(l,2),m=j[0],d=j[1];Object(a.useEffect)((function(){d(!!c)}),[c]);var h=p()("formControl",{"formControl--hasValue":m,"formControl--hasError":t});return Object(f.jsx)(f.Fragment,{children:Object(f.jsxs)("div",{className:h,children:[Object(f.jsx)("input",Object(o.a)({className:"formControl__input",type:"text",id:r,name:r,onChange:s,value:c},i)),Object(f.jsx)("span",{className:"formControl__label",children:Object(f.jsx)("label",{htmlFor:r,children:n})}),Object(f.jsx)("div",{className:"error formControl__errorMessage",children:t})]})})},y=function(e){var t=e.errorMessage,n=e.label,r=e.name,c=e.value,s=e.options,i=e.onChange,l=Object(a.useState)(!1),o=Object(b.a)(l,2),u=o[0],j=o[1];Object(a.useEffect)((function(){j(!!c)}),[c]);var m=p()("formControl",{"formControl--hasValue":u,"formControl--hasError":t});return Object(f.jsxs)("div",{className:m,children:[Object(f.jsx)("select",{name:r,className:"formControl__input",onChange:i,children:null===s||void 0===s?void 0:s.map((function(e){return Object(f.jsx)("option",{value:e.value,children:e.label},e.value)}))}),Object(f.jsx)("span",{className:"formControl__label",children:Object(f.jsx)("label",{htmlFor:r,children:n})}),Object(f.jsx)("div",{className:"error formControl__errorMessage",children:t})]})},_=n(9),N=n.n(_),C=function(e){return Object.keys(e).reduce((function(e,t){return Object(o.a)(Object(o.a)({},e),{},Object(m.a)({},t,!0))}),{})},w=function(e,t){var n=t.reduce((function(t,n,a){return t+parseInt(e[a])*n}),0);return 0!==n&&(n%11===10?0:n%11)===parseInt(e[t.length])},S=function(e,t){var n=t.reduce((function(t,n,a){return t+parseInt(e[a])*n%10}),0);return 0!==n&&10-n%10===parseInt(e[t.length])},k=function(e){return null==e||0===Object.keys(e).length},E=function(e){var t=e.initialValues,n=e.validation,r=e.onSubmit,c=Object(a.useState)({}),s=Object(b.a)(c,2),i=s[0],u=s[1],d=Object(a.useState)({}),p=Object(b.a)(d,2),f=p[0],h=p[1],O=Object(a.useState)(!1),v=Object(b.a)(O,2),g=v[0],x=v[1],y=Object(a.useState)({}),_=Object(b.a)(y,2),N=_[0],w=_[1],S=Object(a.useState)(t),E=Object(b.a)(S,2),F=E[0],M=E[1],I=Object(a.useState)(!1),z=Object(b.a)(I,2),P=z[0],B=z[1],L=Object(a.useCallback)((function(){var e=n(F);h(e),k(e)?x(!0):x(!1)}),[n,F]),V=function(){var e=Object(j.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.preventDefault(),w(C(F)),g&&!P){e.next=5;break}return e.abrupt("return");case 5:return B(!0),e.next=8,r(F);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:return e.prev=13,B(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[0,10,13,16]])})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){L()}),[L]),Object(a.useEffect)((function(){u(function(e,t){return Object.keys(e).reduce((function(n,a){return t[a]?Object(o.a)(Object(o.a)({},n),{},Object(m.a)({},a,e[a])):n}),{})}(f,N))}),[f,N]),{errors:i,isSubmitting:P,isValid:g,values:F,touched:N,handleBlur:function(e){var t=e.target.name;w((function(e){return Object(o.a)(Object(o.a)({},e),{},Object(m.a)({},t,!0))}))},handleChange:function(e){var t=e.target,n=t.name,a=t.value;M((function(e){return Object(o.a)(Object(o.a)({},e),{},Object(m.a)({},n,a))}))},handleSubmit:V}};E.propTypes={initialValues:N.a.shape({}),validation:N.a.func,onSubmit:N.a.func.isRequired};var F="person",M="company",I=[{label:"Osoba",value:F},{label:"Firma",value:M}],z=function(e){var t=e.img,n=e.name,a=e.surname,r=e.type,c=e.pesel,s=e.nip,i={};return k(t)?i.img="Zdj\u0119cie jest wymagane":1!==t.sizes.ratio&&(i.img="Zdj\u0119cie musi mie\u0107 propocje 1:1.\n Wymiary przes\u0142anego zdj\u0119cia: ".concat(t.sizes.width,"px x ").concat(t.sizes.height,"px")),n&&n.trim()||(i.name="Imi\u0119 jest wymagane"),a&&a.trim()||(i.surname="Nazwisko jest wymagane"),r&&r.trim()||(i.type="Typ jest wymagany"),r===F&&(c&&c.trim()?function(e){if(!e.match(/^[0-9]{11}$/))return!1;var t=parseInt(e.substring(2,4));if(!t||t%20>12)return!1;var n=parseInt(e.substring(4,6));return!(!n||n<1||n>31)&&S(e,[1,3,7,9,1,3,7,9,1,3])}(c)||(i.pesel="Niepoprawny numer PESEL"):i.pesel="PESEL jest wymagany"),r===M&&(s&&s.trim()?function(e){return!!e.match(/^[0-9]{10}$/)&&w(e,[6,5,7,2,3,4,5,6,7])}(s)||(i.nip="Niepoprawny numer NIP"):i.nip="NIP jest wymagany"),i},P=function(e){var t,n;return t="".concat("https://localhost:60001/").concat("Contractor/Save"),n=e,new Promise((function(e,a){try{var r=new FormData;Object.keys(n).forEach((function(e){r.append(e,n[e])})),fetch(t,{method:"POST",body:r}).then((function(e){e.json()})).then((function(t){e(t)})).catch((function(e){a("Nie znaleziono metody zapisu")}))}catch(c){a(c)}}))},B=(n(22),{img:"",name:"",surname:"",type:F,pesel:"",nip:""}),L=function(){var e=Object(a.useState)(null),t=Object(b.a)(e,2),n=t[0],r=t[1],c=E({initialValues:B,onSubmit:function(){var e=Object(j.a)(l.a.mark((function e(t){var n,a,c,s,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.img,a=t.nip,c=t.pesel,s=Object(u.a)(t,["img","nip","pesel"]),i=Object(o.a)(Object(o.a)({},s),{},{img:n.file,idNumber:t.type===M?a:c}),r(null),e.next=5,P(i).catch((function(e){return r(e)}));case 5:console.log("end");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),validation:z}),s=c.errors,i=c.isSubmitting,m=c.values,d=c.handleBlur,p=c.handleChange,O=c.handleSubmit;return Object(f.jsxs)("form",{className:"form",onSubmit:O,children:[Object(f.jsxs)("fieldset",{className:"form__fieldset",disabled:i,children:[Object(f.jsx)("div",{className:"form__file",children:Object(f.jsx)(g,{name:"img",onChange:p,onBlur:d,value:m.img,errorMessage:s.img})}),Object(f.jsxs)("div",{className:"form__inputs",children:[Object(f.jsx)(x,{label:"Imi\u0119",name:"name",type:"text",onChange:p,onBlur:d,value:m.name,errorMessage:s.name}),Object(f.jsx)(x,{name:"surname",label:"Nazwisko",type:"text",onChange:p,onBlur:d,value:m.surname,errorMessage:s.surname}),Object(f.jsx)(y,{name:"type",label:"Typ",options:I,onChange:p,onBlur:d,value:m.type,errorMessage:s.type}),"person"===m.type?Object(f.jsx)(x,{id:"pesel",name:"pesel",label:"PESEL",type:"text",maxLength:"11",onChange:p,onBlur:d,value:m.pesel,errorMessage:s.pesel}):Object(f.jsx)(x,{id:"nip",name:"nip",label:"Numer NIP",type:"text",maxLength:"10",onChange:p,onBlur:d,value:m.nip,errorMessage:s.nip})]})]}),Object(f.jsxs)(h,{className:"button--submit form__button",type:"submit",disabled:i,children:["Wy\u015blij",i&&Object(f.jsx)("span",{class:"form__spinner material-icons-outlined",children:"sync"})]}),n&&Object(f.jsx)("div",{className:"error form__errorMessage ",children:n})]})};var V=function(){return Object(f.jsx)("div",{className:"App",children:Object(f.jsx)(L,{})})};n(23);s.a.render(Object(f.jsx)(r.a.StrictMode,{children:Object(f.jsx)(V,{})}),document.getElementById("root"))}},[[24,1,2]]]);
//# sourceMappingURL=main.07a9ceb3.chunk.js.map